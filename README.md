# brave-news-source-suggestion

Pipeline for producing the source embedding representations and similarity matrix needed for source suggestion feature in Brave News (see https://docs.google.com/document/d/1t-XxP5ykelNyrkCVKE4_wtjIZzqPB7-6ZrYTq-KSg-Q/edit)

## Scripts
Run the scripts in the order in which they are presented.

`source-rss-accumulator.py`: parses periodically Brave News's sources, creating articles buckets for each. These buckets are catalogued by `publisher_name` under `output/source_buckets/`.

`source-buckets-sanitisation.py`: sanitises the source buckets collected in the script above. Removes nans and duplicates. The deduplication is carried out in this script for better efficiency.

`sources-similarity-matrix.py`: takes in the source buckets and produces an 512-dimensional embedding for each source, built as the mean of the 512-dimensional embeddings of all articles belonging to the source, as generated by the Universal Sentence Encoder model (https://arxiv.org/abs/1803.11175). Once the embeddings have been generated for all sources, a similarity matrix is built using cosine distance as similarity metric.

## Outputs

`source_embeddings.csv`: [`index | publisher_id | 0 | 1 ... | ... 511`]  stores all the 512-dimensional embeddings for each source under its `publisher_name`.

`sim_matrix.csv`: stores the SxS similarity matrix, where S is the number of sources collected by the `source-rss-accumulator.py` script.

`source_similarity_t10.json` stores the top-10 most similar sources, with similarity score, for each source.

